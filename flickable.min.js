// flickable 0.0.1 Copyright (c) 2013 Yuya Hashimoto
// See http://github.com/yhmt/flickable
!function(a,b,c){function d(a){for(var b=[],c=Object.keys(a),d=0,e=c.length;e;d++,e--)b.push(c[d]);return b}function e(a){var b=Object.prototype.toString.call(a);return"[object NodeList]"===b||"[object HTMLCollection]"===b}function f(a,b){for(var c=0,d=a.length;d;c++,d--)b.call(a[c],c)}function g(a){return q.transform3d?"translate3d("+a+"px, 0, 0)":"translate("+a+"px, 0)"}function h(a){return a instanceof Array?(f(a,function(a){return n.style[a]!==c?!0:void 0}),!1):"string"==typeof a?n.style[a]!==c?!0:!1:void 0}function i(a,b){function e(a,b,d){var e=p[b];if(e)a[e]=d;else{if(a[b]===c)return f(o,function(e){var f=k(e)+k(b);return a[f]!==c?(p[b]=f,a[f]=d,!0):void 0}),!1;p[b]=b,a[b]=d}}var g=a.style,h=d(b);!function(a,c){for(;c;a++,c--)e(g,h[a],b[h[a]])}(0,h.length)}function j(b){function d(a){var b=0;return f(a,function(a){k[a]&&(b+=parseFloat(a.match(/\d+/)[0]))}),b}var e,g,h,i,j,k=b.currentStyle||a.getComputedStyle(b,null),l=function(){var a=["-webkit-box-sizing","-moz-box-sizing","-o-box-sizing","-ms-box-sizing","box-sizing"];return f(a,function(a){return b.style[a]!==c?(e=k.prop,!0):void 0}),!1}();return l||"content-box"!==e?(g=d("margin-right","margin-left"),j=b.scrollWidth+g):(g=d("margin-right","margin-left"),h=d("padding-right","padding-left"),i=d("border-right-width","border-left-width"),j=b.scrollWidth+g+h+i),j}function k(a){return a[0].toUpperCase()+a.substring(1,a.length)}var l,m="Flickable",n=b.createElement("div"),o=["webkit","moz","o","ms"],p={},q=function(){var b=h(["perspectiveProperty","WebkitPerspective","MozPerspective","msPerspective","OPerspective"]),c=h(["transformProperty","WebkitTransform","MozTransform","msTransform","OTransform"]),d=h(["transitionProperty","WebkitTransitionProperty","MozTransitionProperty","msTransitionProperty","OTransitionProperty"]);return{touchEvent:"ontouchstart"in a,addEventListener:"addEventListener"in a,removeEventListener:"removeEventListener"in a,transform3d:b,transform:c,cssAnimation:(b||c)&&d?!0:!1}}(),r=function(){var a=navigator.userAgent.toLowerCase(),b=a.match(/(?:iphone\sos|ip[oa]d.*os)\s([\d_]+)/),c=a.match(/(android)\s+([\d.]+)/),d=!!b,e=!!c,f=function(){var b=/(webkit)[ \/]([\w.]+)/.exec(a)||/(firefox)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||[];return{name:b[1],version:parseFloat(b[2])}}(),g=function(){return q.touchEvent?d?"ios":"android":"desktop"}(),h=function(){return"desktop"!==g?parseFloat((b||c).pop().split(/\D/).join(".")):null}();return{platform:g,browser:f.name,version:{os:h,browser:f.version},isLegacy:e&&3>h||"msie"===f.name&&f.version<10}}(),s=q.touch?"touchstart":"mousedown",t=q.touch?"touchmove":"mousemove",u=q.touch?"touchend":"mouseup";Object.keys||(Object.keys=function(a){var b,c=[],d=0;for(b in a)a.hasOwnProperty(b)&&(c[d++]=b);return c}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),l=function(){function a(a,b){return this.el=a,this.opts=b||{},this.opts.loop=this.otps.loop||!1,this.opts.autoPlay=this.otps.autoPlay||!1,this.opts.interval=this.opts.interval||6600,this.currentPoint=this.opts.currentPoint||0,this.maxPoint=this.currentX=this.maxX=0,this.timeId=null,this}function c(c,d,f){var g,h,i=/^(.+[\#\.\s\[\*>:,]|[\[:])/;return"string"==typeof c?(h=c.substring(1,c.length),g=i.test(c)?b.querySelector(c):"#"===c[0]?b.getElementById(h):"."===c[0]?b.getElementsByClassName(h)[0]:b.getElementsByTagName(c)[0]):(e(c)||"object"==typeof c&&c.length||Array.isArray(c)&&c.length&&c[0].nodeType)&&(g=c[0]),new a(g,d,f)}return a.prototype={handleEvent:function(a){switch(a.type){case s:this._touchStart(a);break;case t:this._touchMove(a);break;case u:this._touchEnd(a);break;case"click":this._click(a)}},refresh:function(){},hasPrev:function(){return this.currentPoint>0},hasNext:function(){return this.currentPoint<this.maxPoint},toPrev:function(){this.hasPrev()&&this.moveToPoint(this.currentPoint-1)},toNext:function(){this.hasNext()&&this.moveToPoint(this.currentPoint+1)},moveToPoint:function(a,b){a=a||this.currentPoint,b=b||this.option.transition.duration,this.currentPoint,0>a||a>this.maxPoint},startAutoPlay:function(){var a,b=this.opts.interval;this.opts.autoPlay&&(this.timerId=setInterval(function(){a.toNext()},b))},clearAutoPlay:function(){this.timeId&&clearInterval(this.timerId)},destroy:function(){},_touchStart:function(){},_touchMove:function(){},_touchEnd:function(){},_click:function(a){a.stopPropagation(),a.preventDefault()},_on:function(a,b,c){return c=c||!1,q.addEventListener?this.el.addEventListener(a,b,c):this.el.attachEvent("on"+a,b)},_off:function(a,b){return q.removeEventListener?this.el.removeEventListener(a,b):this.el.detachEvent("on"+a,b)},_setX:function(a,b){a=parseInt(a,10),b=b||this.opts.duration,this.currentX=a,q.cssAnimation&&r.isLegacy?i(this.el,{transform:g(a)}):r.isLegacy?this.el.style.left=a+"px":this._jsAnimate(a,b)},_setWidth:function(a,b){b=b||j(a),a.style.width=b+"px"},_cloneNode:function(){!this.opts.loop},_loop:function(){}},c}(),a[m]=a[m]||l}(this,this.document);